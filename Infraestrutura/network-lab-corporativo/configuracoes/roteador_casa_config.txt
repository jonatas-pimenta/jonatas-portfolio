! Configuração do Roteador Casa (Router-on-a-Stick)
! Projeto: Rede Corporativa Segmentada

! Configuração básica
hostname Router-Corporativo
enable secret cisco123

! Interface física principal (Trunk para Switches)
interface GigabitEthernet0/0
 no ip address
 no shutdown

! Sub-interface VLAN 10 (RH)
interface GigabitEthernet0/0.10
 description VLAN_RH
 encapsulation dot1Q 10
 ip address 192.168.10.1 255.255.255.0
 ip helper-address 192.168.99.100

! Sub-interface VLAN 20 (Vendas)
interface GigabitEthernet0/0.20
 description VLAN_Vendas
 encapsulation dot1Q 20
 ip address 192.168.20.1 255.255.255.0
 ip helper-address 192.168.99.100

! Sub-interface VLAN 30 (Produção)
interface GigabitEthernet0/0.30
 description VLAN_Producao
 encapsulation dot1Q 30
 ip address 192.168.30.1 255.255.255.0
 ip helper-address 192.168.99.100

! Sub-interface VLAN 40 (Financeiro)
interface GigabitEthernet0/0.40
 description VLAN_Financeiro
 encapsulation dot1Q 40
 ip address 192.168.40.1 255.255.255.0
 ip helper-address 192.168.99.100

! Sub-interface VLAN 99 (TI/Gerência)
interface GigabitEthernet0/0.99
 description VLAN_TI_MGMT
 encapsulation dot1Q 99
 ip address 192.168.99.1 255.255.255.0

! Sub-interface VLAN 100 (Diretoria)
interface GigabitEthernet0/0.100
 description VLAN_Diretoria
 encapsulation dot1Q 100
 ip address 192.168.100.1 255.255.255.0
 ip helper-address 192.168.99.100

! Interface WAN para conexão com Internet
interface GigabitEthernet0/1
 description WAN_Internet
 ip address 200.200.200.2 255.255.255.252
 no shutdown

! Rota padrão para encaminhar tráfego para internet
ip route 0.0.0.0 0.0.0.0 200.200.200.1

! ACL para bloquear acesso à internet da VLAN 30 (Produção)
access-list 101 remark "Bloquear VLAN Producao da Internet"
access-list 101 deny ip 192.168.30.0 0.0.0.255 any
access-list 101 remark "Permitir demais VLANs acessar internet"
access-list 101 permit ip any any

! Aplicação da ACL na interface WAN (outbound)
interface GigabitEthernet0/1
 ip access-group 101 in

! Configuração NAT Overload (PAT) para todas as VLANs
access-list 1 permit 192.168.10.0 0.0.0.255
access-list 1 permit 192.168.20.0 0.0.0.255
access-list 1 permit 192.168.40.0 0.0.0.255
access-list 1 permit 192.168.99.0 0.0.0.255
access-list 1 permit 192.168.100.0 0.0.0.255
! Nota: VLAN 30 (Produção) não incluída intencionalmente

ip nat inside source list 1 interface GigabitEthernet0/1 overload

! Definir interfaces NAT
interface GigabitEthernet0/0
 ip nat inside
interface GigabitEthernet0/1
 ip nat outside

! Configurações de segurança
line con 0
 password cisco123
 login
line vty 0 4
 password cisco123
 login

! Salvar configuração
end
copy running-config startup-config
